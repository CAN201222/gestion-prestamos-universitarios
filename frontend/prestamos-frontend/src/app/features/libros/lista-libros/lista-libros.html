<h3>Catálogo de Libros</h3>

<a class="btn btn-success mb-3" routerLink="/prestamos/nuevo">
  Solicitar un Préstamo
</a>

<div *ngIf="libros$ | async as libros; else loading">
  <table class="table table-striped table-hover">
    <thead class="table-dark">
      <tr>
        <th>Título</th>
        <th>Autor</th>
        <th>ISBN</th>
        <th>Editorial</th>
        <th>Disponibles</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let libro of libros">
        <td>{{ libro.titulo }}</td>
        <td>{{ libro.autor }}</td>
        <td>{{ libro.isbn }}</td>
        <td>{{ libro.editorial }}</td>
        <td>
          <span class="badge" 
                [ngClass]="libro.disponibles > 0 ? 'bg-success' : 'bg-danger'">
            {{ libro.disponibles }} / {{ libro.stock }}
          </span>
        </td>
      </tr>
    </tbody>
  </table>
  <p *ngIf="libros.length === 0">No hay libros registrados.</p>
</div>

<ng-template #loading>
  <div class="text-center">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
  </div>
</ng-template>